<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>RT Electrical - Home</title>
    <link href="style.css" rel="stylesheet"/>
</head>
<body>
    <header class="topbar">
        <div class="logo">
            <img alt="RT Electrical Logo" src="images/logo.jpeg"/>
            <span>RT <strong>Electrical</strong></span>
        </div>
        <nav>
            <a href="index.html">Home</a>
            <a href="services.html">Services</a>
            <a href="gallery.html">Gallery</a>
            <a href="contact.html">Contact</a>
        </nav>
        <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">☰</button>
    </header>

    <nav class="mobile-nav" id="mobile-nav">
        <a href="index.html">Home</a>
        <a href="services.html">Services</a>
        <a href="gallery.html">Gallery</a>
        <a href="contact.html">Contact</a>
    </nav>

    <main>
        <section class="contact-gallery get-in-touch-section">
            <h2>Get in Touch</h2>
            <div class="contact-buttons">
                <a class="btn call-btn" href="tel:+447799531890">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 8px; vertical-align: middle;">
                        <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
                    </svg>
                    Call Us
                </a>
                <a class="btn email-btn" href="mailto:alexanderjmccurdy@gmail.com">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 8px; vertical-align: middle;">
                        <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                    </svg>
                    Email Us
                </a>
            </div>
        </section>

        <section class="our-work-section">
            <div class="gallery-carousel">
                <h2>Our Work</h2>
                <div class="gallery-nav">
                    <button class="nav-btn" onclick="prevGallerySlide()">❮</button>
                    <div class="gallery-track" id="gallery-track">
                        <img alt="Gallery Image 1" class="gallery-img active" onclick="openLightbox(this.src)" src="images/gallery/image1.jfif"/>
                        <img alt="Gallery Image 2" class="gallery-img" onclick="openLightbox(this.src)" src="images/gallery/image2.jfif"/>
                        <img alt="Gallery Image 3" class="gallery-img" onclick="openLightbox(this.src)" src="images/gallery/image3.jfif"/>
                        <img alt="Gallery Image 4" class="gallery-img" onclick="openLightbox(this.src)" src="images/gallery/image4.jfif"/>
                        <img alt="Gallery Image 5" class="gallery-img" onclick="openLightbox(this.src)" src="images/gallery/image5.jfif"/>
                        <img alt="Gallery Image 6" class="gallery-img" onclick="openLightbox(this.src)" src="images/gallery/image6.jfif"/>
                        <img alt="Gallery Image 7" class="gallery-img" onclick="openLightbox(this.src)" src="images/gallery/image7.jfif"/>
                    </div>
                    <button class="nav-btn" onclick="nextGallerySlide()">❯</button>
                </div>
                <div class="gallery-indicators" id="gallery-indicators"></div>
            </div>
        </section>

        <div id="lightbox" onclick="closeLightbox()">
            <img alt="Full Image" id="lightbox-img" src="#"/>
        </div>

        <section class="hero text-center">
            <h2>Who We Are</h2>
            <div class="hero-text">
                <p>At RT Electrical, we are committed to delivering safe, reliable, and professional electrical services across Scotland. With years of industry experience, our team of qualified electricians handles projects of all sizes—from minor domestic repairs to large-scale commercial installations.</p>
                <p>Customer satisfaction and safety are at the core of everything we do. We are NICEIC approved, fully insured, and operate 24/7 to ensure we're there when you need us most.</p>
                <p>Our approach is built on trust, technical expertise, and an unwavering commitment to high standards. Whether you're a homeowner, landlord, or business, we take the time to understand your needs and provide tailored solutions with transparent pricing and top-quality workmanship.</p>
                <p>Choose RT Electrical for peace of mind and service you can rely on.</p>
            </div>
            <div class="badges">
                <span>✔ Fully Insured</span>
                <span>✔ NICEIC Approved</span>
                <span>✔ Emergency Callouts</span>
            </div>
        </section>

                <section class="google-reviews animated-section">
            <div class="reviews-container">
                <h2>What Our Customers Say</h2>
                <div class="reviews-widget">
                    <!-- Google Reviews Widget Placeholder -->
                    <div class="reviews-placeholder" id="reviews-placeholder">

                        </div>
                        <a href="https://www.google.com/search?q=RT+Electrical&rlz=1C1GCEB_enGB1028GB1028&oq=rt+elec&gs_lcrp=EgZjaHJvbWUqDggAEEUYJxg7GIAEGIoFMg4IABBFGCcYOxiABBiKBTIGCAEQRRg7MgYIAhBFGEAyBggDEEUYOTIICAQQRRgnGDsyBggFEEUYPDIGCAYQRRg8MgYIBxBFGDzSAQgxNTQ3ajBqN6gCCLACAfEFsgjc9o31TJg&sourceid=chrome&ie=UTF-8&lqi=Cg1SVCBFbGVjdHJpY2FsSNegx_L6soCACFoXEAAQARgAGAEiDXJ0IGVsZWN0cmljYWx6DFJlbmZyZXdzaGlyZZIBC2VsZWN0cmljaWFuqgFJEAEqESINcnQgZWxlY3RyaWNhbCgAMh8QASIbsp9kxX3j3ovPn3x8jG4WHXumFnMZJCwLqUd5MhEQAiINcnQgZWxlY3RyaWNhbA#lkt=LocalPoiReviews&rlimm=4568966453537299075" target="_blank" class="google-button">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                                <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                                <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                                <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                            </svg>
                            View Our Google Reviews
                        </a>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="booking-form animated-section">
            <h2>Book a Free Quote</h2>
            <div class="card">
                <form action="https://formspree.io/f/xanwkqeo" method="POST" enctype="multipart/form-data" onsubmit="showPopup(event)">
                    <input type="hidden" name="_to" value="alexanderjmccurdy@gmail.com">
                    <input type="hidden" name="_subject" value="New Quote Request from Website">
                    <input type="hidden" name="_cc" value="alexanderjmccurdy@gmail.com">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="name">Full Name *</label>
                            <input id="name" name="name" placeholder="Your full name" required type="text"/>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number *</label>
                            <input id="phone" name="phone" placeholder="Your phone number" required type="tel"/>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="email">Email Address *</label>
                            <input id="email" name="email" placeholder="Your email address" required type="email"/>
                        </div>
                        <div class="form-group">
                            <label for="postcode">Postcode</label>
                            <input id="postcode" name="postcode" placeholder="Your postcode" type="text"/>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="work-type">Type of Electrical Work *</label>
                            <select id="work-type" name="work_type" required>
                                <option value="">Please select...</option>
                                <option value="rewiring">Full Rewiring</option>
                                <option value="partial-rewiring">Partial Rewiring</option>
                                <option value="consumer-unit">Consumer Unit Upgrade</option>
                                <option value="additional-sockets">Additional Sockets</option>
                                <option value="lighting-installation">Lighting Installation</option>
                                <option value="outdoor-lighting">Outdoor/Security Lighting</option>
                                <option value="ev-charger">EV Charger Installation</option>
                                <option value="smart-home">Smart Home Installation</option>
                                <option value="emergency-repair">Emergency Repair</option>
                                <option value="fault-finding">Fault Finding</option>
                                <option value="eicr-testing">EICR Testing & Certification</option>
                                <option value="pat-testing">PAT Testing</option>
                                <option value="commercial-work">Commercial Work</option>
                                <option value="landlord-services">Landlord Services</option>
                                <option value="inspection-testing">Inspection & Testing</option>
                                <option value="new-build">New Build Installation</option>
                                <option value="shower-installation">Electric Shower Installation</option>
                                <option value="cooker-installation">Cooker Installation</option>
                                <option value="other">Other (please specify)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="urgency">Urgency Level</label>
                            <select id="urgency" name="urgency">
                                <option value="standard">Standard (within 1-2 weeks)</option>
                                <option value="urgent">Urgent (within 2-3 days)</option>
                                <option value="emergency">Emergency (same day/24hrs)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <label for="property-type">Property Type</label>
                        <select id="property-type" name="property_type">
                            <option value="">Please select...</option>
                            <option value="house">House</option>
                            <option value="flat">Flat/Apartment</option>
                            <option value="bungalow">Bungalow</option>
                            <option value="commercial">Commercial Property</option>
                            <option value="office">Office</option>
                            <option value="retail">Retail</option>
                            <option value="industrial">Industrial</option>
                            <option value="new-build">New Build</option>
                            <option value="period-property">Period Property</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label for="message">Project Details *</label>
                        <textarea id="message" name="message" placeholder="Please describe your electrical work requirements in detail. Include any specific issues, room locations, or special requirements." required></textarea>
                    </div>

                    <div class="form-group full-width">
                        <label for="images">Upload Images (Optional)</label>
                        <div class="file-upload">
                            <input type="file" id="images" name="images" accept="image/*" multiple onchange="handleFileSelect(event)">
                            <label for="images" class="file-upload-label" id="file-upload-label">
                                <svg class="file-upload-icon" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                                </svg>
                                <div class="file-upload-text">
                                    <div>Click to upload images</div>
                                    <small>Photos of existing electrical work, problem areas, or project location</small>
                                </div>
                            </label>
                        </div>
                        <div class="file-info">
                            <small>Accepted formats: JPG, PNG, WebP. Max 10MB per file. Multiple files allowed.</small>
                        </div>
                        <div class="file-list" id="file-list"></div>
                    </div>

                    <div class="form-group full-width">
                        <label>
                            <input type="checkbox" name="emergency_contact" value="yes" style="margin-right: 8px;">
                            This is an emergency - please contact me immediately
                        </label>
                    </div>

                    <div class="form-group full-width">
                        <label>
                            <input type="checkbox" name="marketing_consent" value="yes" style="margin-right: 8px;">
                            I'd like to receive updates about electrical safety and special offers
                        </label>
                    </div>

                    <button class="btn primary" type="submit">Submit Quote Request</button>
                </form>
                <div class="alternative-contact" style="margin-top: 1rem; text-align: center;">
                    <p style="font-size: 0.9rem; color: #ccc;">Having trouble with the form? 
                        <a href="mailto:alexanderjmccurdy@gmail.com?subject=Quote Request&body=Please include your name, phone number, and details about what you need help with." 
                           style="color: #dc143c; text-decoration: underline;">Email us directly</a>
                    </p>
                </div>
            </div>
        </section>

        <section class="testimonials animated-section">
            <h2>Testimonials</h2>
            <div class="card">
                <div class="carousel">
                    <div class="testimonial active">
                        <p>"Quick, reliable, and professional! Highly recommend RT Electrical."</p>
                        <span>– Laura from Glasgow</span>
                    </div>
                    <div class="testimonial">
                        <p>"Great work rewiring our home. Explained everything clearly."</p>
                        <span>– David from Glasgow</span>
                    </div>
                    <div class="testimonial">
                        <p>"Fantastic service on short notice."</p>
                        <span>– Sarah from Paisley</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="faq animated-section">
            <h2>Frequently Asked Questions</h2>
            <div class="card">
                <div class="accordion">
                    <div class="accordion-item">
                        <button class="accordion-header">Do you offer emergency services?</button>
                        <div class="accordion-body">Yes! We offer emergency callouts across Scotland.</div>
                    </div>
                    <div class="accordion-item">
                        <button class="accordion-header">Are you fully insured and certified?</button>
                        <div class="accordion-body">We are NICEIC approved and fully insured for domestic, commercial and industrial work.</div>
                    </div>
                    <div class="accordion-item">
                        <button class="accordion-header">Can I get a free quote?</button>
                        <div class="accordion-body">Absolutely. Contact us anytime to schedule a free, no-obligation quote.</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div class="thank-you-popup" id="thank-you-popup">
        <div class="thank-you-content">
            <h3>Thank you for your quote request!</h3>
            <p>We've received your enquiry and will get back to you within 24 hours.</p>
            <p>For emergency work, please call us directly at <strong>07799 531890</strong></p>
            <button onclick="closePopup()">Close</button>
        </div>
    </div>

    <script>
        // Mobile Menu Toggle
        function toggleMobileMenu() {
            const mobileNav = document.getElementById('mobile-nav');
            mobileNav.classList.toggle('active');
        }

        // Gallery Carousel
        let galleryIndex = 0;
        const images = document.querySelectorAll('.gallery-img');
        const totalImages = images.length;

        function createIndicators() {
            const indicatorsContainer = document.getElementById('gallery-indicators');
            for (let i = 0; i < totalImages; i++) {
                const indicator = document.createElement('div');
                indicator.className = i === 0 ? 'indicator active' : 'indicator';
                indicator.onclick = () => goToSlide(i);
                indicatorsContainer.appendChild(indicator);
            }
        }

        function updateGallery() {
            // Hide all images
            images.forEach((img, idx) => {
                img.classList.remove('active');
            });
            
            // Show current image
            images[galleryIndex].classList.add('active');
            
            // Update indicators
            const indicators = document.querySelectorAll('.indicator');
            indicators.forEach((indicator, idx) => {
                indicator.classList.toggle('active', idx === galleryIndex);
            });
        }

        function nextGallerySlide() {
            galleryIndex = (galleryIndex + 1) % totalImages;
            updateGallery();
        }

        function prevGallerySlide() {
            galleryIndex = (galleryIndex - 1 + totalImages) % totalImages;
            updateGallery();
        }

        function goToSlide(index) {
            galleryIndex = index;
            updateGallery();
        }

        function openLightbox(src) {
            document.getElementById('lightbox-img').src = src;
            document.getElementById('lightbox').style.display = 'flex';
        }

        function closeLightbox() {
            document.getElementById('lightbox').style.display = 'none';
        }

        // Testimonials Carousel
        let current = 0;
        const testimonials = document.querySelectorAll('.testimonial');
        
        function rotateTestimonials() {
            testimonials[current].classList.remove('active');
            current = (current + 1) % testimonials.length;
            testimonials[current].classList.add('active');
        }

        // FAQ Accordion
        function initAccordion() {
            document.querySelectorAll('.accordion-header').forEach(header => {
                header.addEventListener('click', () => {
                    const body = header.nextElementSibling;
                    const isOpen = body.style.display === 'block';
                    
                    // Close all accordion items
                    document.querySelectorAll('.accordion-body').forEach(item => {
                        item.style.display = 'none';
                    });
                    
                    // Toggle current item
                    body.style.display = isOpen ? 'none' : 'block';
                });
            });
        }

        // File Upload Handling
        let selectedFiles = [];

        function handleFileSelect(event) {
            const files = Array.from(event.target.files);
            const fileList = document.getElementById('file-list');
            const uploadLabel = document.getElementById('file-upload-label');
            
            files.forEach(file => {
                // Check file size (10MB limit)
                if (file.size > 10 * 1024 * 1024) {
                    alert(`File "${file.name}" is too large. Maximum size is 10MB.`);
                    return;
                }
                
                // Check file type
                if (!file.type.startsWith('image/')) {
                    alert(`File "${file.name}" is not an image.`);
                    return;
                }
                
                selectedFiles.push(file);
                
                // Create file item element
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <span>${file.name}</span>
                    <button type="button" class="file-remove" onclick="removeFile('${file.name}')">×</button>
                `;
                fileList.appendChild(fileItem);
            });
            
            // Update upload label
            if (selectedFiles.length > 0) {
                uploadLabel.classList.add('has-file');
                uploadLabel.querySelector('.file-upload-text div').textContent = 
                    `${selectedFiles.length} file${selectedFiles.length > 1 ? 's' : ''} selected`;
            }
        }

        function removeFile(fileName) {
            selectedFiles = selectedFiles.filter(file => file.name !== fileName);
            
            // Remove from display
            const fileItems = document.querySelectorAll('.file-item');
            fileItems.forEach(item => {
                if (item.textContent.includes(fileName)) {
                    item.remove();
                }
            });
            
            // Update upload label
            const uploadLabel = document.getElementById('file-upload-label');
            if (selectedFiles.length === 0) {
                uploadLabel.classList.remove('has-file');
                uploadLabel.querySelector('.file-upload-text div').textContent = 'Click to upload images';
            } else {
                uploadLabel.querySelector('.file-upload-text div').textContent = 
                    `${selectedFiles.length} file${selectedFiles.length > 1 ? 's' : ''} selected`;
            }
            
            // Clear file input
            document.getElementById('images').value = '';
        }

        // Enhanced Form Submission with File Upload
        function showPopup(e) {
            e.preventDefault();
            const form = e.target;
            
            // Show loading state
            const submitBtn = form.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Sending...';
            submitBtn.disabled = true;
            
            // Create FormData object for file upload support
            const formData = new FormData(form);
            
            // Add selected files to form data
            selectedFiles.forEach((file, index) => {
                formData.append(`image_${index}`, file);
            });
            
            // Send form with files
            fetch(form.action, {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
                
                if (response.ok) {
                    document.getElementById("thank-you-popup").style.display = "flex";
                    form.reset();
                    
                    // Clear file selection
                    selectedFiles = [];
                    document.getElementById('file-list').innerHTML = '';
                    const uploadLabel = document.getElementById('file-upload-label');
                    uploadLabel.classList.remove('has-file');
                    uploadLabel.querySelector('.file-upload-text div').textContent = 'Click to upload images';
                } else {
                    return response.json().then(data => {
                        throw new Error(data.error || 'Form submission failed');
                    });
                }
            }).catch(error => {
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
                
                const errorMsg = error.message.includes('Failed to fetch') 
                    ? 'Network error. Please check your connection and try again.'
                    : 'There was an error sending your message. Please try again or contact us directly.';
                
                showErrorPopup(errorMsg);
            });
        }

        // Urgency Level Styling
        function updateUrgencyStyles() {
            const urgencySelect = document.getElementById('urgency');
            const form = urgencySelect.closest('form');
            
            urgencySelect.addEventListener('change', function() {
                // Remove existing priority classes
                form.classList.remove('priority-high', 'priority-medium', 'priority-low');
                
                // Add new priority class based on selection
                switch(this.value) {
                    case 'emergency':
                        form.classList.add('priority-high');
                        break;
                    case 'urgent':
                        form.classList.add('priority-medium');
                        break;
                    case 'standard':
                        form.classList.add('priority-low');
                        break;
                }
            });
        }

        // Enhanced Form Validation
        function validateForm() {
            const workType = document.getElementById('work-type').value;
            const message = document.getElementById('message').value;
            
            if (workType === 'other' && message.length < 20) {
                alert('Please provide more details about your electrical work requirements.');
                return false;
            }
            
            if (workType === 'emergency' && !message.toLowerCase().includes('emergency')) {
                const addEmergency = confirm('You selected emergency work. Should we add "EMERGENCY" to your message?');
                if (addEmergency) {
                    document.getElementById('message').value = 'EMERGENCY: ' + message;
                }
            }
            
            return true;
        }

        function showErrorPopup(message) {
            // Create error popup if it doesn't exist
            let errorPopup = document.getElementById('error-popup');
            if (!errorPopup) {
                errorPopup = document.createElement('div');
                errorPopup.id = 'error-popup';
                errorPopup.innerHTML = `
                    <div class="error-content">
                        <h3>Error</h3>
                        <p id="error-message"></p>
                        <button onclick="closeErrorPopup()">Close</button>
                    </div>
                `;
                document.body.appendChild(errorPopup);
            }
            
            document.getElementById('error-message').textContent = message;
            errorPopup.style.display = 'flex';
        }

        function closeErrorPopup() {
            const errorPopup = document.getElementById('error-popup');
            if (errorPopup) {
                errorPopup.style.display = 'none';
            }
        }

        function closePopup() {
            document.getElementById("thank-you-popup").style.display = "none";
        }

        // Scroll Animation
        function initScrollAnimation() {
            const sections = document.querySelectorAll(".animated-section");
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add("in-view");
                    }
                });
            }, { threshold: 0.1 });

            sections.forEach(section => {
                observer.observe(section);
            });
        }

        // Initialize everything when page loads
        window.addEventListener('load', () => {
            createIndicators();
            updateGallery();
            initAccordion();
            initScrollAnimation();
            updateUrgencyStyles();
            
            // Add form validation
            const form = document.querySelector('form');
            if (form) {
                form.addEventListener('submit', function(e) {
                    if (!validateForm()) {
                        e.preventDefault();
                    }
                });
            }
            
            // Start automatic slideshow
            setInterval(nextGallerySlide, 4000);
            setInterval(rotateTestimonials, 6000);
        });
    </script>
</body>
</html>
